<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>AVR32 UC3 - TC Driver: Main Page</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
<link href="tabs.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.5.1-p1 -->
<div class="tabs">
  <ul>
    <li id="current"><a href="main.html"><span>Main&nbsp;Page</span></a></li>
    <li><a href="annotated.html"><span>Data&nbsp;Structures</span></a></li>
    <li><a href="files.html"><span>Files</span></a></li>
    <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
  </ul></div>
<h1>AVR32 UC3 - TC Driver Documentation</h1>
<p>
<h2><a class="anchor" name="intro">
Introduction</a></h2>
This is the documentation for the data structures, functions, variables, defines, enums, and typedefs for the TC driver. <br>
It also gives an example of the usage of the TC module.<br>
<p>
This example will start a timer/counter and generate a PWM on the output.<p>
Channel 0 of timer/counter module 0 is used with the output pin TIOA0. You will find the port and pin number in the datasheet of your device. The selected timer input clock is the internal clock labelled TC2 referred to as TIMER_CLOCK2 in the datasheet. Use an oscilloscope to probe the TC channel's output pin. <dl class="note" compact><dt><b>Note:</b></dt><dd><ul>
<li>On the AT32UC3A0512, the output pin TIOA0 is mapped on PB23. <br>
</li><li>On the AT32UC3B0256, the output pin TIOA0 is mapped on PB00.</li></ul>
</dd></dl>
The 16-bit timer/counter value register (CV) will cycle from 0x0000 to 0xFFFF. The chosen channel with a low output pin level upon starting point (i.e. when CV == 0) will toggle the output pin level when it reaches the values 0x0600 and 0x2000. This will hence produce a PWM output signal with a duty cycle of (0x2000 - 0x600) / 0x10000 i.e. 10.16% <dl class="note" compact><dt><b>Note:</b></dt><dd>According to datasheet, TIMER_CLOCK2 is equal to (clk_pba/4). Since we switch the main CPU clock to OSC0 (=12MHz), we have TIMER_CLOCK2 == 3MHz.<br>
 According to the settings performed by the application, the output waveform should thus have the following properties:<ul>
<li>The period of the waveform will thus be 3000000/65535 == 45.7Hz,</li><li>A full duty cycle(just toggling the channel's output pin when CV reaches 0xFFFF and passes to 0x0000) thus lasts 21.845ms(65535/3000000). A duty cycle of 10.16% means that when probing the channel's output pin you should see a duty cycle of ~2.2ms(10.16% of 21.845ms).</li></ul>
</dd></dl>
<h2><a class="anchor" name="files">
Main Files</a></h2>
<ul>
<li><a class="el" href="a00004.html">tc.c</a>: TC driver;</li><li><a class="el" href="a00005.html">tc.h</a>: TC driver header file;</li><li><a class="el" href="a00006.html">tc_example1.c</a>: TC example 1.</li></ul>
<h2><a class="anchor" name="compinfo">
Compilation Info</a></h2>
This software was written for the GNU GCC for AVR32 and IAR Systems compiler for AVR32. Other compilers may or may not work.<h2><a class="anchor" name="deviceinfo">
Device Info</a></h2>
All AVR32 devices with a TC module can be used. This example has been tested with the following boards:<br>
<ul>
<li>EVK1100 evaluation kit with an AT32UC3A0512 MCU.</li><li>EVK1101 evaluation kit with an AT32UC3B0256 MCU.</li></ul>
<h2><a class="anchor" name="setupinfo">
Setup Information</a></h2>
CPU speed: <em> 12 MHz. </em><h2><a class="anchor" name="contactinfo">
Contact Information</a></h2>
For further information, visit <a href="http://www.atmel.com/products/AVR32/">Atmel AVR32</a>.<br>
 Support and FAQ: <a href="http://support.atmel.no/">http://support.atmel.no/</a> <hr size="1"><address style="align: right;"><small>Generated on Thu Sep 20 12:12:52 2007 for AVR32 UC3 - TC Driver by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.5.1-p1 </small></address>
</body>
</html>
